<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caminho de Santiago de Compostela</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c6e49;
            --secondary-color: #4c956c;
            --accent-color: #fefee3;
            --text-color: #333;
            --light-color: #f9f9f9;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f4f8;
            color: var(--text-color);
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem 2rem;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .logo i {
            font-size: 1.8rem;
        }
        
        .container {
            display: flex;
            max-width: 1400px;
            margin: 2rem auto;
            gap: 2rem;
            padding: 0 1rem;
        }
        
        .sidebar {
            flex: 0 0 320px;
            background: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 1.5rem;
            height: fit-content;
        }
        
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .search-box {
            margin-bottom: 1.5rem;
        }
        
        .search-box input {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            margin-bottom: 1rem;
        }
        
        .search-box input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 2px rgba(76, 149, 108, 0.2);
        }
        
        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .filter-btn {
            padding: 0.5rem 1rem;
            background: var(--light-color);
            border: 1px solid #ddd;
            border-radius: 20px;
            cursor: pointer;
            text-align: center;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .filter-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .results {
            max-height: 500px;
            overflow-y: auto;
        }
        
        .result-item {
            padding: 1rem;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .result-item:hover {
            background: #f8fafc;
            transform: translateX(3px);
        }
        
        .result-item h3 {
            color: var(--primary-color);
            margin-bottom: 0.3rem;
        }
        
        .result-item .date {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }
        
        .result-item .distance {
            font-size: 0.85rem;
            color: var(--secondary-color);
            font-weight: 500;
        }
        
        .map-container {
            flex: 1;
            background: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            overflow: hidden;
            position: relative;
        }
        
        #map {
            height: 500px;
            width: 100%;
            border-radius: 10px;
        }
        
        .stats-container {
            display: flex;
            gap: 1rem;
        }
        
        .stat-box {
            flex: 1;
            background: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 1.5rem;
            text-align: center;
        }
        
        .stat-box h3 {
            color: var(--secondary-color);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        
        .stat-box .value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .stat-box .unit {
            font-size: 1rem;
            color: #666;
        }
        
        .progress-container {
            margin-top: 1rem;
            background: #e9ecef;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--secondary-color);
            border-radius: 5px;
            width: 32%;
        }
        
        .gps-info {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: var(--shadow);
            z-index: 1000;
            max-width: 300px;
        }
        
        .gps-info h3 {
            margin-bottom: 0.5rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .location-info {
            font-size: 0.9rem;
            color: #666;
        }
        
        .location-info div {
            margin-bottom: 0.3rem;
        }
        
        .location-info span {
            font-weight: 500;
            color: var(--text-color);
        }
        
        .stage-info {
            background: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 1.5rem;
        }
        
        .stage-info h2 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--accent-color);
        }
        
        .stage-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .stage-details div {
            display: flex;
            flex-direction: column;
        }
        
        .stage-details label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.3rem;
        }
        
        .stage-details span {
            font-weight: 500;
            font-size: 1.1rem;
        }
        
        .gf-info {
            background: var(--accent-color);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        
        .gf-info i {
            color: var(--primary-color);
            margin-right: 5px;
        }
        
        .train-info {
            background: #e8f4f8;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        
        .train-info h4 {
            color: #1a73e8;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        @media (max-width: 900px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                flex: 1;
                width: 100%;
            }
            
            .stats-container {
                flex-direction: column;
            }
            
            .stage-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <i class="fas fa-hiking"></i>
                <h1>Caminho de Santiago de Compostela</h1>
            </div>
            <div class="date">Setembro/Outubro 2025</div>
        </div>
    </header>
    
    <div class="container">
        <div class="sidebar">
            <div class="search-box">
                <input type="text" id="search-input" placeholder="Buscar por data, localização ou hotel...">
                <div class="filters">
                    <div class="filter-btn active" data-filter="all">Todos</div>
                    <div class="filter-btn" data-filter="date">Data</div>
                    <div class="filter-btn" data-filter="location">Localização</div>
                    <div class="filter-btn" data-filter="hotel">Hotel</div>
                    <div class="filter-btn" data-filter="trem">Trem</div>
                    <div class="filter-btn" data-filter="gf">Opções GF</div>
                </div>
            </div>
            <div class="results" id="results-container">
                <!-- Results will be populated by JavaScript -->
            </div>
        </div>
        
        <div class="main-content">
            <div class="map-container">
                <div id="map"></div>
                <div class="gps-info">
                    <h3><i class="fas fa-location-dot"></i> Minha Posição</h3>
                    <div class="location-info">
                        <div>Localização: <span id="current-location">Oviedo</span></div>
                        <div>Distância percorrida: <span id="distance-covered">0 km</span></div>
                        <div>Próxima etapa: <span id="next-stage">Grado (25 km)</span></div>
                        <div>Distância restante: <span id="distance-remaining">25 km</span></div>
                    </div>
                </div>
            </div>
            
            <div class="stats-container">
                <div class="stat-box">
                    <h3>Distância Total</h3>
                    <div class="value">320 <span class="unit">km</span></div>
                    <div class="progress-container">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.9rem;">Caminho Primitivo (14 dias)</p>
                </div>
                
                <div class="stat-box">
                    <h3>Dia Atual</h3>
                    <div class="value">3 <span class="unit">de 14</span></div>
                    <div style="margin-top: 10px; font-size: 0.9rem;">
                        <div>26/09 - Sexta-feira</div>
                        <div>Oviedo → Grado</div>
                    </div>
                </div>
                
                <div class="stat-box">
                    <h3>Próximo Hotel</h3>
                    <div style="margin-top: 10px;">
                        <div><strong>Hotel Auto-Bar Florez</strong></div>
                        <div>Estrada, 29, Grado</div>
                        <div class="gf-info">
                            <i class="fas fa-info-circle"></i> Opções GF: Tortilla, ovos, arroz
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="stage-info">
                <h2>Etapa Atual: Oviedo → Grado (~25 KM)</h2>
                <div class="stage-details">
                    <div>
                        <label>Partida</label>
                        <span>Catedral de Oviedo</span>
                    </div>
                    <div>
                        <label>Chegada</label>
                        <span>Grado</span>
                    </div>
                    <div>
                        <label>Terreno</label>
                        <span>Subidas leves até El Escamplero, descida até Grado</span>
                    </div>
                    <div>
                        <label>Duração estimada</label>
                        <span>5-6 horas</span>
                    </div>
                </div>
                <div class="gf-info">
                    <i class="fas fa-utensils"></i> <strong>Recomendações GF:</strong> Tortilla, ovos, arroz. Solicitar "sin pan".
                </div>
                <div class="train-info">
                    <h4><i class="fas fa-train"></i> Informações do Trem</h4>
                    <div><strong>Origem:</strong> MADRID-CHAMARTIN 25/09/2025 14:59</div>
                    <div><strong>Destino:</strong> OVIEDO/UVIÉU 25/09/2025 18:23</div>
                    <div><strong>Localizador:</strong> RHNLC4</div>
                    <div><strong>Nº Billete Um:</strong> 7071701842610</div>
                    <div><strong>Nº Billete Dois:</strong> 7071701842602</div>
                    <div><strong>Coche:</strong> 8 Plaza: 3B AVE 05721 ESTANDAR</div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // Sample data based on the itinerary
        const itineraryData = [
            { 
                date: "25/09", 
                day: "QUINTA", 
                location: "Oviedo", 
                hotel: "B48 Oviedo Ópera", 
                address: "C. Covadonga n7, 33002 Oviedo, Spain", 
                etapa: "Chegada em Oviedo",
                checkin: "Chave será liberada no momento do check-in pelo aplicativo B48",
                trem: {
                    localizador: "RHNLC4",
                    billete_um: "7071701842610",
                    billete_dois: "7071701842602",
                    origem: "MADRID-CHAMARTIN 25/09/2025 14:59",
                    destino: "OVIEDO/UVIÉU 25/09/2025 18:23",
                    coche: "8 Plaza: 3B AVE 05721 ESTANDAR"
                }
            },
            { 
                date: "26/09", 
                day: "SEXTA", 
                location: "Grado", 
                hotel: "Hotel Auto-Bar Florez", 
                address: "Estrada, 29, 33820 Grado, Espanha", 
                etapa: "Dia 1: Oviedo → Grado", 
                distance: "25 km", 
                gf: "Tortilla, ovos, arroz. Solicitar 'sin pan'." 
            },
            { 
                date: "27/09", 
                day: "SÁBADO", 
                location: "Salas", 
                hotel: "Hotel Casa Sueno", 
                address: "Calle Ondinas 19, 33860 Salas, Espanha", 
                etapa: "Dia 2: Grado → Salas", 
                distance: "22 km", 
                gf: "Peça refeições simples (tortilla, carnes grelhadas)" 
            },
            { 
                date: "28/09", 
                day: "DOMINGO", 
                location: "Tineo", 
                hotel: "Calle Pio Cuervo, 3", 
                address: "Calle Pio Cuervo, 3, 33870 Tineo, Espanha", 
                etapa: "Dia 3: Salas → Tineo", 
                distance: "20 km", 
                gf: "Produtos no supermercado local, café local com arroz ou ovos" 
            },
            { 
                date: "29/09", 
                day: "SEGUNDA", 
                location: "Pola de Allande", 
                hotel: "Fonda La Nueva Allandesa", 
                address: "Donato Fernández, 3, 33880 Pola de Allande, Espanha", 
                etapa: "Dia 4: Tineo → Pola de Allande", 
                distance: "28 km", 
                gf: "Albergue pode preparar janta sob aviso; leve snacks GF" 
            },
            { 
                date: "30/09", 
                day: "TERÇA", 
                location: "Berducedo", 
                hotel: "Albergue Casa Marques", 
                address: "Berducedo, Espanha", 
                etapa: "Dia 5: Pola de Allande → Berducedo", 
                distance: "16 km", 
                gf: "Refeições sob aviso, tortilhas locais, frutas" 
            },
            { 
                date: "01/10", 
                day: "QUARTA", 
                location: "Grandas de Salime", 
                hotel: "Hotel Las Grandas", 
                address: "Vistalegre, s/n, 33730 Grandas de Salime, Asturias", 
                etapa: "Dia 6: Berducedo → Grandas de Salime", 
                distance: "20 km", 
                gf: "Refeições locais simples; mercado com opções básicas" 
            },
            { 
                date: "02/10", 
                day: "QUINTA", 
                location: "A Fonsagrada", 
                hotel: "Hotel Pórtico", 
                address: "C mayor N : 26, 27100 Fonsagrada, Espanha", 
                etapa: "Dia 7: Grandas de Salime → A Fonsagrada", 
                distance: "26 km", 
                gf: "Restaurantes como 'Pulpería A Caldeira' (informe celíaco)" 
            },
            { 
                date: "03/10", 
                day: "SEXTA", 
                location: "O Cádavo", 
                hotel: "Pension La Marronda", 
                address: "Avenida de Lugo, 6, 27130 Baleira, Espanha", 
                etapa: "Dia 8: A Fonsagrada → O Cádavo", 
                distance: "24 km", 
                gf: "Refeições sob aviso prévio, leve pão GF se possível" 
            },
            { 
                date: "04/10", 
                day: "SÁBADO", 
                location: "Lugo", 
                hotel: "U Hotel Dario Lugo", 
                address: "Franco, 12, 27003 Lugo, Espanha", 
                etapa: "Dia 9: O Cádavo → Lugo", 
                distance: "30 km", 
                gf: "Restaurante La Oca – GF completo (pizza, pão, sobremesas)" 
            },
            { 
                date: "05/10", 
                day: "DOMINGO", 
                location: "Ferreira", 
                hotel: "Ponte Ferreira", 
                address: "Ferreira, 27200 Ferreira, Espanha", 
                etapa: "Dia 10: Lugo → Ferreira", 
                distance: "29 km", 
                gf: "Jantar no próprio albergue — avise com antecedência" 
            },
            { 
                date: "06/10", 
                day: "SEGUNDA", 
                location: "Melide", 
                hotel: "Pousada Orois", 
                address: "Rua Alexandre Boveda 13, 15800 Melide, Espanha", 
                etapa: "Dia 11: Ferreira → Melide", 
                distance: "20 km", 
                gf: "Pulpería A Gamacha – informe para preparo seguro" 
            },
            { 
                date: "07/10", 
                day: "TERÇA", 
                location: "Arzúa", 
                hotel: "Hotel Vilarino Moscoso", 
                address: "Rúa da Calexa S/N, Arzúa, Espanha", 
                etapa: "Dia 12: Melide → Arzúa", 
                distance: "15 km", 
                gf: "Restaurantes com saladas, carnes grelhadas" 
            },
            { 
                date: "08/10", 
                day: "QUINTA", 
                location: "O Pedrouzo", 
                hotel: "White Tree By Arca Hostel", 
                address: "Rúa Forcarey 5 Bloque 6 Bajo, 15821 O Pedrouzo, Espanha", 
                etapa: "Dia 13: Arzúa → O Pedrouzo", 
                distance: "19 km", 
                gf: "Cafés com tortilla, arroz e embutidos — confirme preparo" 
            },
            { 
                date: "09/10", 
                day: "QUINTA", 
                location: "Santiago de Compostela", 
                hotel: "Hotel Ciudad de Compostela", 
                address: "Avenida de Lugo, 213, 15703 Santiago de Compostela, Espanha", 
                etapa: "Dia 14: O Pedrouzo → Santiago de Compostela", 
                distance: "19 km", 
                gf: "Restaurantes GF-friendly: A Curtidoria, Restaurante A Moa" 
            }
        ];

        // Initialize the map
        const map = L.map('map').setView([43.3623, -5.8500], 11);

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Coordinates for the Camino Primitivo path (simplified)
        const caminoPath = [
            [43.3623, -5.8500], // Oviedo
            [43.3896, -6.0713], // Grado
            [43.4100, -6.2583], // Salas
            [43.3356, -6.4150], // Tineo
            [43.2710, -6.7250], // Pola de Allande
            [43.1917, -6.8000], // Berducedo
            [43.2150, -6.8750], // Grandas de Salime
            [43.1250, -7.0700], // A Fonsagrada
            [43.0000, -7.2000], // O Cádavo
            [43.0090, -7.5560], // Lugo
            [42.9500, -7.6500], // Ferreira
            [42.9167, -8.0167], // Melide
            [42.9333, -8.1833], // Arzúa
            [42.9167, -8.3667], // O Pedrouzo
            [42.8800, -8.5444]  // Santiago de Compostela
        ];

        // Draw the blue path
        const pathLine = L.polyline(caminoPath, {
            color: '#1e88e5',
            weight: 6,
            opacity: 0.7
        }).addTo(map);

        // Add markers for each location
        const markers = [];
        itineraryData.forEach((item, index) => {
            if (index < caminoPath.length) {
                const marker = L.marker(caminoPath[index]).addTo(map);
                
                let popupContent = `
                    <b>${item.location}</b><br>
                    ${item.date} - ${item.day}<br>
                    Hotel: ${item.hotel}<br>
                    Etapa: ${item.etapa}
                `;
                
                if (item.checkin) {
                    popupContent += `<br>${item.checkin}`;
                }
                
                if (item.trem) {
                    popupContent += `<br><br><b>Informações do Trem:</b><br>
                    Origem: ${item.trem.origem}<br>
                    Destino: ${item.trem.destino}<br>
                    Localizador: ${item.trem.localizador}
                    `;
                }
                
                marker.bindPopup(popupContent);
                markers.push(marker);
            }
        });

        // Current position marker
        const currentPosition = L.marker(caminoPath[0], {
            icon: L.divIcon({
                className: 'current-position-marker',
                html: '<div class="pulse"></div>',
                iconSize: [20, 20]
            })
        }).addTo(map);

        // Function to update the map and position
        function updatePosition() {
            // Simulate movement along the path
            const progress = Math.min(1, (Date.now() % 30000) / 30000);
            const segment = Math.floor(progress * (caminoPath.length - 1));
            const segmentProgress = progress * (caminoPath.length - 1) - segment;
            
            const lat = caminoPath[segment][0] + 
                (caminoPath[segment+1][0] - caminoPath[segment][0]) * segmentProgress;
            const lng = caminoPath[segment][1] + 
                (caminoPath[segment+1][1] - caminoPath[segment][1]) * segmentProgress;
                
            currentPosition.setLatLng([lat, lng]);
            map.panTo([lat, lng]);
            
            // Update stats
            const distanceCovered = segment * 20 + segmentProgress * 20;
            const distanceRemaining = 320 - distanceCovered;
            
            document.getElementById('distance-covered').textContent = distanceCovered.toFixed(1) + ' km';
            document.getElementById('distance-remaining').textContent = distanceRemaining.toFixed(1) + ' km';
            document.getElementById('progress-bar').style.width = (distanceCovered / 320 * 100) + '%';
            
            // Update current location
            if (segment < itineraryData.length) {
                document.getElementById('current-location').textContent = itineraryData[segment].location;
            }
            
            // Update next stage
            if (segment < markers.length - 1) {
                const nextStage = itineraryData[segment+1];
                document.getElementById('next-stage').textContent = 
                    `${nextStage.location} (${nextStage.distance})`;
            }
            
            // Continue the animation
            setTimeout(updatePosition, 100);
        }
        
        // Start position simulation
        updatePosition();

        // Render results
        function renderResults(filter = 'all', searchTerm = '') {
            const resultsContainer = document.getElementById('results-container');
            resultsContainer.innerHTML = '';
            
            const filteredData = itineraryData.filter(item => {
                const term = searchTerm.toLowerCase();
                
                if (filter === 'date') {
                    return item.date.toLowerCase().includes(term);
                } else if (filter === 'location') {
                    return item.location.toLowerCase().includes(term);
                } else if (filter === 'hotel') {
                    return item.hotel.toLowerCase().includes(term);
                } else if (filter === 'trem') {
                    return item.trem && (
                        item.trem.localizador.toLowerCase().includes(term) ||
                        item.trem.origem.toLowerCase().includes(term) ||
                        item.trem.destino.toLowerCase().includes(term)
                    );
                } else if (filter === 'gf') {
                    return item.gf && item.gf.toLowerCase().includes(term);
                } else {
                    return (
                        item.date.toLowerCase().includes(term) ||
                        item.location.toLowerCase().includes(term) ||
                        item.hotel.toLowerCase().includes(term) ||
                        (item.trem && (
                            item.trem.localizador.toLowerCase().includes(term) ||
                            item.trem.origem.toLowerCase().includes(term) ||
                            item.trem.destino.toLowerCase().includes(term)
                        )) ||
                        (item.gf && item.gf.toLowerCase().includes(term))
                    );
                }
            });
            
            if (filteredData.length === 0) {
                resultsContainer.innerHTML = '<p class="no-results">Nenhum resultado encontrado.</p>';
                return;
            }
            
            filteredData.forEach(item => {
                const resultItem = document.createElement('div');
                resultItem.className = 'result-item';
                
                let itemContent = `
                    <h3>${item.hotel}</h3>
                    <div class="date">${item.date} - ${item.day}</div>
                    <div><strong>Localização:</strong> ${item.location}</div>
                    <div><strong>Endereço:</strong> ${item.address}</div>
                `;
                
                if (item.checkin) {
                    itemContent += `<div><strong>Check-in:</strong> ${item.checkin}</div>`;
                }
                
                if (item.trem) {
                    itemContent += `
                        <div><strong>Trem:</strong> ${item.trem.origem.split(' ')[0]} → ${item.trem.destino.split(' ')[0]}</div>
                        <div><strong>Localizador:</strong> ${item.trem.localizador}</div>
                    `;
                }
                
                if (item.distance) {
                    itemContent += `<div class="distance">Distância: ${item.distance}</div>`;
                }
                
                if (item.gf) {
                    itemContent += `<div class="gf-info-small"><i class="fas fa-utensils"></i> ${item.gf}</div>`;
                }
                
                resultItem.innerHTML = itemContent;
                resultsContainer.appendChild(resultItem);
                
                // Add click event to center map on location
                resultItem.addEventListener('click', () => {
                    const index = itineraryData.findIndex(i => i.date === item.date);
                    if (index < caminoPath.length) {
                        map.setView(caminoPath[index], 13);
                        markers[index].openPopup();
                    }
                });
            });
        }
        
        // Initial render
        renderResults();
        
        // Setup search functionality
        const searchInput = document.getElementById('search-input');
        searchInput.addEventListener('input', () => {
            const filter = document.querySelector('.filter-btn.active').dataset.filter;
            renderResults(filter, searchInput.value);
        });
        
        // Setup filter buttons
        const filterButtons = document.querySelectorAll('.filter-btn');
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                filterButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                renderResults(button.dataset.filter, searchInput.value);
            });
        });
        
        // Add custom CSS for pulsing marker
        const style = document.createElement('style');
        style.innerHTML = `
            .current-position-marker {
                background: none;
                border: none;
            }
            
            .pulse {
                display: block;
                width: 20px;
                height: 20px;
                border-radius: 50%;
                background: #e53935;
                cursor: pointer;
                box-shadow: 0 0 0 rgba(229, 57, 53, 0.4);
                animation: pulse 1.5s infinite;
            }
            
            .gf-info-small {
                font-size: 0.85rem;
                color: #2c6e49;
                margin-top: 0.5rem;
                padding: 0.3rem;
                background: #fefee3;
                border-radius: 4px;
            }
            
            @keyframes pulse {
                0% {
                    box-shadow: 0 0 0 0 rgba(229, 57, 53, 0.4);
                }
                70% {
                    box-shadow: 0 0 0 15px rgba(229, 57, 53, 0);
                }
                100% {
                    box-shadow: 0 0 0 0 rgba(229, 57, 53, 0);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>